name: "architecture_spec"
category: "technical"
version: "1.0.0"
description: "Template para documentar especificaciones arquitect√≥nicas del sistema Bit√°cora"

# Triggers que activan este template
trigger_patterns:
  - "**/01_ARQUITECTURA/*.md"
  - "architecture design"
  - "system design"
  - "arquitectura del sistema"

# Personalidad del template
personality:
  tone: "technical_explanatory"
  depth: "deep_theoretical_and_practical"
  style: "educational_but_precise"
  approach: "top-down"  # Desde conceptos hasta implementaci√≥n

# Estructura obligatoria
structure:
  # Metadatos de auditor√≠a
  audit_header:
    required: true
    format: "yaml"
    fields:
      - archivo
      - version
      - fecha_creacion
      - autor
      - proposito
      - estado
      - relacionado_con
      - fundamentos  # Base te√≥rica (papers, RFCs, etc.)

  # Secciones principales
  sections:
    - name: "purpose"
      title: "üéØ PROP√ìSITO"
      required: true
      prompt: |
        Explicar en 3-4 p√°rrafos:
        - ¬øQu√© aspecto arquitect√≥nico describe este documento?
        - ¬øPor qu√© necesitamos esta arquitectura espec√≠fica?
        - ¬øQu√© problemas resuelve vs. alternativas?
        - ¬øC√≥mo se relaciona con BITA-1/BITA-2?
      
    - name: "theoretical_foundation"
      title: "üìñ FUNDAMENTOS TE√ìRICOS"
      required: true
      prompt: |
        Base conceptual de la arquitectura:
        - Papers acad√©micos relevantes
        - RFCs o especificaciones formales
        - Conceptos de ciencias de la computaci√≥n
        - Analog√≠as del mundo real
        
        Ejemplo:
        - Content-addressable storage ‚Üí Git internals
        - Spherical coordinates ‚Üí Sistema solar, mapas astron√≥micos
      
    - name: "architecture_overview"
      title: "üèóÔ∏è VISI√ìN GENERAL DE ARQUITECTURA"
      required: true
      prompt: |
        Diagrama ASCII del sistema:
        ```
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Component A   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   Component B   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ```
        
        Descripci√≥n de cada bloque y sus relaciones.
      
    - name: "detailed_design"
      title: "üî¨ DISE√ëO DETALLADO"
      required: true
      prompt: |
        Deep dive t√©cnico:
        
        ### Componentes Principales
        - Descripci√≥n de cada componente
        - Responsabilidades espec√≠ficas
        - Interfaces p√∫blicas
        
        ### Flujo de Datos
        - Input ‚Üí Processing ‚Üí Output
        - Transformaciones en cada etapa
        
        ### Decisiones de Dise√±o
        - Trade-offs considerados
        - Alternativas descartadas
        - Razones de las elecciones
      
    - name: "implementation_strategy"
      title: "‚öôÔ∏è ESTRATEGIA DE IMPLEMENTACI√ìN"
      required: true
      prompt: |
        C√≥mo llevar el dise√±o a c√≥digo Rust:
        
        ```rust
        // Estructuras principales
        pub struct ArchitectureComponent {
            // Campos clave
        }
        
        // APIs cr√≠ticas
        impl ArchitectureComponent {
            pub fn core_operation(&self) -> Result<Output>;
        }
        ```
        
        - Crates de Rust necesarios
        - Patterns de dise√±o aplicables
        - Consideraciones de concurrencia
      
    - name: "data_formats"
      title: "üóÇÔ∏è FORMATOS DE DATOS"
      required: true
      prompt: |
        Si la arquitectura define formatos:
        
        - Serializaci√≥n (CBOR, JSON, binario)
        - Esquemas de datos (structs, enums)
        - Versionado de formatos
        - Compatibilidad hacia atr√°s
      
    - name: "performance_characteristics"
      title: "‚ö° CARACTER√çSTICAS DE PERFORMANCE"
      required: true
      prompt: |
        Benchmarks esperados y reales:
        
        | Operaci√≥n | Complejidad | Target | Actual | Notas |
        |-----------|-------------|--------|--------|-------|
        | insert    | O(log n)    | <10ms  | 5ms    | ‚úÖ    |
        | query     | O(n)        | <100ms | TBD    | ‚è∏Ô∏è    |
        
        - An√°lisis de complejidad algor√≠tmica
        - Bottlenecks conocidos
        - Estrategias de optimizaci√≥n
      
    - name: "scalability"
      title: "üìà ESCALABILIDAD"
      required: false
      prompt: |
        - L√≠mites te√≥ricos del sistema
        - Comportamiento con datasets grandes
        - Estrategias de sharding/partitioning
        - Consideraciones de memoria/disco
      
    - name: "security_considerations"
      title: "üîê CONSIDERACIONES DE SEGURIDAD"
      required: false
      prompt: |
        Si aplica:
        - Encriptaci√≥n de datos
        - Validaci√≥n de integridad
        - Control de acceso
        - Protecci√≥n contra ataques conocidos
      
    - name: "comparison_with_alternatives"
      title: "‚öñÔ∏è COMPARACI√ìN CON ALTERNATIVAS"
      required: true
      prompt: |
        | Aspecto | Nuestra Arquitectura | Alternativa 1 | Alternativa 2 |
        |---------|---------------------|---------------|---------------|
        | Performance | ... | ... | ... |
        | Complejidad | ... | ... | ... |
        | Caso de uso | ... | ... | ... |
        
        Por qu√© elegimos esta arquitectura sobre las dem√°s.
      
    - name: "integration_points"
      title: "üîó PUNTOS DE INTEGRACI√ìN"
      required: true
      prompt: |
        C√≥mo esta arquitectura se integra con:
        - Otros componentes de Bit√°cora
        - Sistemas externos (si aplica)
        - APIs y protocolos
      
    - name: "testing_validation"
      title: "üß™ TESTING Y VALIDACI√ìN"
      required: true
      prompt: |
        - Tests arquitect√≥nicos (property-based)
        - Validaci√≥n de invariantes
        - Benchmarks de referencia
        - Golden tests para formatos de datos
      
    - name: "references"
      title: "üìö REFERENCIAS"
      required: true
      prompt: |
        - Documentos ROADMAP_V2 relacionados
        - Decisiones arquitect√≥nicas (DA-XXX)
        - Especificaciones (BITA-X)
        - Papers acad√©micos
        - RFCs o est√°ndares
        - C√≥digo de referencia (B20250915-data-compressor)
      
    - name: "future_enhancements"
      title: "üöÄ MEJORAS FUTURAS"
      required: true
      prompt: |
        - v1.0: Implementaci√≥n actual/planeada
        - v2.0: Optimizaciones propuestas
        - Research: Ideas experimentales

  # Footer est√°ndar
  footer:
    required: true
    format: "markdown"
    content: |
      ---
      **Estado:** [üìã Especificaci√≥n | üöß En dise√±o | ‚úÖ Implementado]  
      **Complejidad:** [üü¢ BAJA | üü° MEDIA | üî¥ ALTA]  
      **Prioridad:** [üî¥ CR√çTICA | üü° ALTA | üü¢ MEDIA]
      
      ---
      *Generado: {fecha}*  
      *Sistema Bit√°cora v1.0 - MTT-DSL Template: architecture_spec*

# Validaciones autom√°ticas
validations:
  - check: "has_diagrams"
    message: "Documento arquitect√≥nico debe incluir diagramas ASCII"
  
  - check: "has_performance_analysis"
    message: "Debe incluir an√°lisis de performance y complejidad"
  
  - check: "compares_alternatives"
    message: "Debe comparar con alternativas y justificar elecci√≥n"
  
  - check: "has_theoretical_foundation"
    message: "Debe explicar base te√≥rica/conceptual"

# M√©tricas de calidad
quality_metrics:
  min_diagrams: 2
  min_code_examples: 2
  min_references: 3
  min_sections_completed: 11
  max_document_size_kb: 25

# Instrucciones para LLMs
llm_instructions: |
  Cuando generes un documento arquitect√≥nico:
  
  1. IDENTIFICA el aspecto arquitect√≥nico del nombre:
     - "SISTEMA_DUAL_DATABASES.md" ‚Üí Dise√±o de bases de datos dual-helix
     - "PIXEL_STORAGE_DEEP_DIVE.md" ‚Üí Arquitectura de encoding visual
     - "CBOR_IMPLEMENTATION.md" ‚Üí Formato de serializaci√≥n
  
  2. INVESTIGA fundamentos te√≥ricos:
     - Busca papers/RFCs relacionados
     - Encuentra analog√≠as del mundo real
     - Identifica conceptos de CS subyacentes
  
  3. DISE√ëA top-down:
     - Empieza con vista panor√°mica (diagrama general)
     - Descomp√≥n en componentes
     - Detalla cada componente
     - Muestra c√≥mo se conectan
  
  4. IMPLEMENTA bottom-up:
     - Muestra estructuras de datos Rust
     - Define APIs p√∫blicas
     - Explica algoritmos internos
     - Proporciona ejemplos de c√≥digo
  
  5. VALIDA performance:
     - An√°lisis de complejidad O(n)
     - Benchmarks esperados
     - Bottlenecks conocidos
     - Estrategias de optimizaci√≥n
  
  6. COMPARA con alternativas:
     - ¬øPor qu√© esta arquitectura?
     - ¬øQu√© descartamos?
     - ¬øQu√© trade-offs aceptamos?
  
  7. CONECTA con el ecosistema:
     - Referencias a DA-XXX
     - Links a BITA-1/BITA-2
     - Integraci√≥n con otros componentes
     - C√≥digo de referencia en B20250915-data-compressor

# Ejemplo de uso
example_output_path: "ROADMAP_V2/01_ARQUITECTURA/VOXEL_CUBIC_STORAGE.md"

# Estado del template
status: "active"
last_updated: "2025-10-26"
usage_count: 0
effectiveness_score: null
